<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Smart Agri Advisor</title>
  <style>
    body {
      margin: 0; padding: 0;
      font-family: Arial, sans-serif;
      color: #222;
      background: url('https://i.ibb.co/djsMQLV/farm-bg.jpg') no-repeat center center/cover;
    }
    header {
      background: rgba(0,0,0,0.6);
      color: #fff;
      padding: 15px;
      text-align: center;
    }
    .container {
      max-width: 850px;
      margin: 20px auto;
      background: rgba(255,255,255,0.92);
      padding: 20px;
      border-radius: 10px;
    }
    label { display:block; margin:10px 0 5px; font-weight: bold; }
    input, select, button {
      width: 100%;
      padding: 8px;
      border-radius: 5px;
      border: 1px solid #ccc;
      margin-bottom: 15px;
    }
    button {
      background: #0b74ff;
      color: #fff;
      cursor: pointer;
      border: none;
    }
    button:hover { background: #095fcc; }
    .result {
      margin-top: 15px;
      padding: 10px;
      background: #f0f8ff;
      border-left: 4px solid #0b74ff;
      white-space: pre-line;
    }
    video, canvas {
      max-width: 100%;
      margin: 10px 0;
      border: 2px solid #0b74ff;
      border-radius: 8px;
    }
  </style>
</head>
<body>
  <header>
    <h1>üå± Smart Agri Advisor</h1>
    <p>Soil, Crop, Irrigation & Weather-based tips for farmers</p>
  </header>

  <div class="container">
    <h2>Farmer Input</h2>

    <label>Select Location</label>
    <select id="location">
      <option value="telangana">Telangana</option>
      <option value="punjab">Punjab</option>
      <option value="bihar">Bihar</option>
      <option value="delhi">Delhi</option>
    </select>

    <label>Select Language</label>
    <select id="language">
      <option value="en">English</option>
      <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä (Hindi)</option>
      <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å (Telugu)</option>
      <option value="pa">‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä (Punjabi)</option>
    </select>

    <label>Soil pH (optional manual input)</label>
    <input type="number" id="soilPh" step="0.1" value="6.5">

    <label>Soil Type</label>
    <select id="soilType">
      <option value="loam">Loam</option>
      <option value="clay">Clay</option>
      <option value="sandy">Sandy</option>
    </select>

    <button onclick="getAdvice()">Get Recommendation</button>

    <h3>üì∑ Scan Soil/Plant</h3>
    <video id="video" autoplay playsinline></video><br>
    <button onclick="captureImage()">Capture & Analyze</button>
    <canvas id="canvas" width="400" height="300"></canvas>

    <h3>üé§ Voice Support</h3>
    <button onclick="startListening()">üéô Speak Command</button>
    <button onclick="speakAdvice()">üîä Hear Advice</button>

    <div class="result" id="adviceBox">No advice yet.</div>
  </div>

  <script>
    const translations = {
      en: {
        recommend: "Recommended Crops & Tips",
        crops: {
          telangana: ["Cotton", "Red Gram (Tur)", "Rice"],
          punjab: ["Wheat", "Rice", "Maize"],
          bihar: ["Maize", "Sugarcane", "Paddy"],
          delhi: ["Vegetables", "Wheat", "Mustard"]
        },
        tips: {
          lowPh: "Add lime to raise soil pH.",
          highPh: "Apply sulfur to reduce alkalinity.",
          sandy: "Add compost to retain water.",
          clay: "Ensure proper drainage.",
          loam: "Balanced soil ‚Äî maintain organic matter.",
          budget: "Use bio-fertilizers and local seeds to save costs.",
          weather: "Check local rainfall forecast before sowing."
        },
        disease: ["Leaf spot detected", "Possible nutrient deficiency", "Healthy crop"],
        irrigation: {
          Cotton: { sandy: "Irrigate every 7‚Äì10 days (light, frequent).", clay: "Irrigate every 15 days (avoid waterlogging).", loam: "Irrigate every 12 days, moderate water." },
          "Red Gram (Tur)": { sandy: "Minimal irrigation; depends on rainfall.", clay: "Irrigate only at flowering and pod filling.", loam: "Irrigate at branching and flowering stages." },
          Rice: { sandy: "Needs continuous water; puddling recommended.", clay: "Maintain 2‚Äì3 inches of standing water.", loam: "Keep soil moist, irrigate every 7 days." },
          Wheat: { sandy: "Irrigate every 10‚Äì12 days.", clay: "Irrigate at root, flowering, grain filling.", loam: "Irrigate every 12‚Äì15 days." },
          Vegetables: { sandy: "Irrigate daily in summer.", clay: "Irrigate 2‚Äì3 times per week.", loam: "Irrigate every 3‚Äì4 days." }
        }
      },
      hi: {
        recommend: "‡§Ö‡§®‡•Å‡§∂‡§Ç‡§∏‡§ø‡§§ ‡§´‡§∏‡§≤‡•á‡§Ç ‡§î‡§∞ ‡§∏‡•Å‡§ù‡§æ‡§µ",
        crops: {
          telangana: ["‡§ï‡§™‡§æ‡§∏", "‡§Ö‡§∞‡§π‡§∞ (‡§§‡•Ç‡§∞)", "‡§ß‡§æ‡§®"],
          punjab: ["‡§ó‡•á‡§π‡•Ç‡§Ç", "‡§ß‡§æ‡§®", "‡§Æ‡§ï‡•ç‡§ï‡§æ"],
          bihar: ["‡§Æ‡§ï‡•ç‡§ï‡§æ", "‡§ó‡§®‡•ç‡§®‡§æ", "‡§ß‡§æ‡§®"],
          delhi: ["‡§∏‡§¨‡•ç‡§ú‡§º‡§ø‡§Ø‡§æ‡§Å", "‡§ó‡•á‡§π‡•Ç‡§Ç", "‡§∏‡§∞‡§∏‡•ã‡§Ç"]
        },
        tips: {
          lowPh: "‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§ï‡•Ä pH ‡§¨‡§¢‡§º‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ö‡•Å‡§®‡§æ ‡§°‡§æ‡§≤‡•á‡§Ç‡•§",
          highPh: "‡§ï‡•ç‡§∑‡§æ‡§∞‡•Ä‡§Ø‡§§‡§æ ‡§ï‡§Æ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ó‡§Ç‡§ß‡§ï ‡§°‡§æ‡§≤‡•á‡§Ç‡•§",
          sandy: "‡§™‡§æ‡§®‡•Ä ‡§∞‡•ã‡§ï‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ñ‡§æ‡§¶ ‡§Æ‡§ø‡§≤‡§æ‡§è‡§Å‡•§",
          clay: "‡§™‡§æ‡§®‡•Ä ‡§ï‡•Ä ‡§®‡§ø‡§ï‡§æ‡§∏‡•Ä ‡§∏‡•Å‡§®‡§ø‡§∂‡•ç‡§ö‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç‡•§",
          loam: "‡§∏‡§Ç‡§§‡•Å‡§≤‡§ø‡§§ ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‚Äî ‡§ï‡§æ‡§∞‡•ç‡§¨‡§®‡§ø‡§ï ‡§™‡§¶‡§æ‡§∞‡•ç‡§• ‡§¨‡§®‡§æ‡§è ‡§∞‡§ñ‡•á‡§Ç‡•§",
          budget: "‡§ñ‡§∞‡•ç‡§ö ‡§¨‡§ö‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ú‡•à‡§µ ‡§â‡§∞‡•ç‡§µ‡§∞‡§ï ‡§î‡§∞ ‡§∏‡•ç‡§•‡§æ‡§®‡•Ä‡§Ø ‡§¨‡•Ä‡§ú ‡§Ö‡§™‡§®‡§æ‡§è‡§Å‡•§",
          weather: "‡§¨‡•Å‡§µ‡§æ‡§à ‡§∏‡•á ‡§™‡§π‡§≤‡•á ‡§∏‡•ç‡§•‡§æ‡§®‡•Ä‡§Ø ‡§µ‡§∞‡•ç‡§∑‡§æ ‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§®‡•Å‡§Æ‡§æ‡§® ‡§¶‡•á‡§ñ‡•á‡§Ç‡•§"
        },
        disease: ["‡§™‡§§‡•ç‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§™‡§∞ ‡§ß‡§¨‡•ç‡§¨‡•á", "‡§™‡•ã‡§∑‡§ï ‡§§‡§§‡•ç‡§µ‡•ã‡§Ç ‡§ï‡•Ä ‡§ï‡§Æ‡•Ä", "‡§´‡§∏‡§≤ ‡§∏‡•ç‡§µ‡§∏‡•ç‡§• ‡§π‡•à"],
        irrigation: {
          Cotton: { sandy: "‡§π‡§∞ 7‚Äì10 ‡§¶‡§ø‡§® ‡§∏‡§ø‡§Ç‡§ö‡§æ‡§à ‡§ï‡§∞‡•á‡§Ç (‡§π‡§≤‡•ç‡§ï‡•Ä ‡§î‡§∞ ‡§¨‡§æ‡§∞-‡§¨‡§æ‡§∞).", clay: "‡§π‡§∞ 15 ‡§¶‡§ø‡§® ‡§∏‡§ø‡§Ç‡§ö‡§æ‡§à, ‡§ú‡§≤‡§≠‡§∞‡§æ‡§µ ‡§∏‡•á ‡§¨‡§ö‡•á‡§Ç.", loam: "‡§π‡§∞ 12 ‡§¶‡§ø‡§® ‡§Æ‡§ß‡•ç‡§Ø‡§Æ ‡§™‡§æ‡§®‡•Ä ‡§¶‡•á‡§Ç." },
          "Red Gram (Tur)": { sandy: "‡§Æ‡§ø‡§®‡§ø‡§Æ‡§≤ ‡§∏‡§ø‡§Ç‡§ö‡§æ‡§à; ‡§µ‡§∞‡•ç‡§∑‡§æ ‡§™‡§∞ ‡§®‡§ø‡§∞‡•ç‡§≠‡§∞.", clay: "‡§´‡•Ç‡§≤‡§®‡•á ‡§î‡§∞ ‡§´‡§≤‡•Ä ‡§≠‡§∞‡§®‡•á ‡§™‡§∞ ‡§π‡•Ä ‡§∏‡§ø‡§Ç‡§ö‡§æ‡§à.", loam: "‡§∂‡§æ‡§ñ‡§æ ‡§î‡§∞ ‡§´‡•Ç‡§≤‡§®‡•á ‡§ï‡•á ‡§∏‡§Æ‡§Ø ‡§∏‡§ø‡§Ç‡§ö‡§æ‡§à ‡§ï‡§∞‡•á‡§Ç." },
          Rice: { sandy: "‡§≤‡§ó‡§æ‡§§‡§æ‡§∞ ‡§™‡§æ‡§®‡•Ä ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ; ‡§ó‡•Ä‡§≤‡§æ ‡§ï‡§∞‡§®‡§æ ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï.", clay: "2‚Äì3 ‡§á‡§Ç‡§ö ‡§™‡§æ‡§®‡•Ä ‡§¨‡§®‡§æ‡§è ‡§∞‡§ñ‡•á‡§Ç.", loam: "‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§ï‡•ã ‡§®‡§Æ ‡§∞‡§ñ‡•á‡§Ç, ‡§π‡§∞ 7 ‡§¶‡§ø‡§® ‡§∏‡§ø‡§Ç‡§ö‡§æ‡§à ‡§ï‡§∞‡•á‡§Ç." },
          Wheat: { sandy: "‡§π‡§∞ 10‚Äì12 ‡§¶‡§ø‡§® ‡§∏‡§ø‡§Ç‡§ö‡§æ‡§à.", clay: "‡§ú‡§°‡§º, ‡§´‡•Ç‡§≤ ‡§î‡§∞ ‡§Ö‡§®‡§æ‡§ú ‡§≠‡§∞‡§§‡•á ‡§∏‡§Æ‡§Ø ‡§∏‡§ø‡§Ç‡§ö‡§æ‡§à.", loam: "‡§π‡§∞ 12‚Äì15 ‡§¶‡§ø‡§® ‡§∏‡§ø‡§Ç‡§ö‡§æ‡§à." },
          Vegetables: { sandy: "‡§ó‡§∞‡•ç‡§Æ‡•Ä ‡§Æ‡•á‡§Ç ‡§∞‡•ã‡§ú ‡§∏‡§ø‡§Ç‡§ö‡§æ‡§à.", clay: "‡§∏‡§™‡•ç‡§§‡§æ‡§π ‡§Æ‡•á‡§Ç 2‚Äì3 ‡§¨‡§æ‡§∞.", loam: "‡§π‡§∞ 3‚Äì4 ‡§¶‡§ø‡§® ‡§∏‡§ø‡§Ç‡§ö‡§æ‡§à." }
        }
      },
      te: {
        recommend: "‡∞™‡∞Ç‡∞ü‡∞≤‡±Å ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞∏‡±Ç‡∞ö‡∞®‡∞≤‡±Å",
        crops: {
          telangana: ["‡∞™‡∞§‡±ç‡∞§‡∞ø", "‡∞ï‡∞Ç‡∞¶‡±Å‡∞≤‡±Å (‡∞§‡±Ç‡∞∞‡±ç)", "‡∞µ‡∞∞‡∞ø"],
          punjab: ["‡∞ó‡±ã‡∞ß‡±Å‡∞Æ‡∞≤‡±Å", "‡∞µ‡∞∞‡∞ø", "‡∞Æ‡±ä‡∞ï‡±ç‡∞ï‡∞ú‡±ä‡∞®‡±ç‡∞®"],
          bihar: ["‡∞Æ‡±ä‡∞ï‡±ç‡∞ï‡∞ú‡±ä‡∞®‡±ç‡∞®", "‡∞ö‡±Ü‡∞∞‡∞ï‡±Å", "‡∞µ‡∞∞‡∞ø"],
          delhi: ["‡∞ï‡±Ç‡∞∞‡∞ó‡∞æ‡∞Ø‡∞≤‡±Å", "‡∞ó‡±ã‡∞ß‡±Å‡∞Æ‡∞≤‡±Å", "‡∞Ü‡∞µ‡∞æ‡∞≤‡±Å"]
        },
        tips: {
          lowPh: "pH ‡∞™‡±Ü‡∞Ç‡∞ö‡∞°‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞∏‡±Å‡∞®‡±ç‡∞®‡∞Ç ‡∞µ‡±á‡∞∏‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø.",
          highPh: "‡∞Ö‡∞≤‡±ç‡∞ï‡∞≤‡∞ø‡∞®‡∞ø‡∞ü‡±Ä ‡∞§‡∞ó‡±ç‡∞ó‡∞ø‡∞Ç‡∞ö‡∞°‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞∏‡∞≤‡±ç‡∞´‡∞∞‡±ç ‡∞µ‡±á‡∞∏‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø.",
          sandy: "‡∞®‡±Ä‡∞∞‡±Å ‡∞®‡∞ø‡∞≤‡±ç‡∞µ‡∞ö‡±á‡∞Ø‡∞°‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞ï‡∞Ç‡∞™‡±ã‡∞∏‡±ç‡∞ü‡±ç ‡∞µ‡±á‡∞∏‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø.",
          clay: "‡∞Æ‡∞Ç‡∞ö‡∞ø ‡∞°‡±ç‡∞∞‡±à‡∞®‡±á‡∞ú‡±ç ‡∞â‡∞Ç‡∞°‡±á‡∞≤‡∞æ ‡∞ö‡±Ç‡∞°‡∞Ç‡∞°‡∞ø.",
          loam: "‡∞∏‡∞Æ‡∞§‡±Å‡∞≤‡±ç‡∞Ø‡∞Æ‡±à‡∞® ‡∞Æ‡∞ü‡±ç‡∞ü‡∞ø ‚Äî ‡∞ú‡±Ä‡∞µ ‡∞™‡∞¶‡∞æ‡∞∞‡±ç‡∞•‡∞æ‡∞≤‡±Å ‡∞®‡∞ø‡∞≤‡±Å‡∞™‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø.",
          budget: "‡∞ñ‡∞∞‡±ç‡∞ö‡±Å ‡∞§‡∞ó‡±ç‡∞ó‡∞ø‡∞Ç‡∞ö‡∞°‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞¨‡∞Ø‡±ã ‡∞é‡∞∞‡±Å‡∞µ‡±Å‡∞≤‡±Å ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞∏‡±ç‡∞•‡∞æ‡∞®‡∞ø‡∞ï ‡∞µ‡∞ø‡∞§‡±ç‡∞§‡∞®‡∞æ‡∞≤‡±Å ‡∞µ‡∞æ‡∞°‡∞Ç‡∞°‡∞ø.",
          weather: "‡∞µ‡∞ø‡∞§‡±ç‡∞§‡∞®‡∞æ‡∞≤‡±Å ‡∞µ‡±á‡∞∏‡±á ‡∞Æ‡±Å‡∞Ç‡∞¶‡±Å ‡∞µ‡∞∞‡±ç‡∞∑‡∞Ç ‡∞Ö‡∞Ç‡∞ö‡∞®‡∞æ‡∞≤‡±Å ‡∞ö‡±Ç‡∞°‡∞Ç‡∞°‡∞ø."
        },
        disease: ["‡∞Ü‡∞ï‡±Å ‡∞Æ‡∞ö‡±ç‡∞ö‡∞≤‡±Å", "‡∞™‡±ã‡∞∑‡∞ï ‡∞≤‡±ã‡∞™‡∞Ç", "‡∞™‡∞Ç‡∞ü ‡∞Ü‡∞∞‡±ã‡∞ó‡±ç‡∞Ø‡∞Ç‡∞ó‡∞æ ‡∞â‡∞Ç‡∞¶‡∞ø"],
        irrigation: {
          Cotton: { sandy: "‡∞™‡±ç‡∞∞‡∞§‡∞ø 7‚Äì10 ‡∞∞‡±ã‡∞ú‡±Å‡∞≤‡±ç‡∞≤‡±ã ‡∞®‡±Ä‡∞ü‡∞ø‡∞µ‡±ç‡∞µ‡∞Ç‡∞°‡∞ø (‡∞≤‡±à‡∞ü‡±ç, ‡∞§‡∞∞‡∞ö‡±Å‡∞ó‡∞æ).", clay: "‡∞™‡±ç‡∞∞‡∞§‡∞ø 15 ‡∞∞‡±ã‡∞ú‡±Å‡∞≤‡±ç‡∞≤‡±ã ‡∞®‡±Ä‡∞ü‡∞ø‡∞µ‡±ç‡∞µ‡∞Ç‡∞°‡∞ø, ‡∞®‡±Ä‡∞∞‡±Å ‡∞®‡∞ø‡∞≤‡∞ï‡∞°‡∞µ‡±ç‡∞µ‡∞ï‡∞Ç‡∞°‡∞ø.", loam: "‡∞™‡±ç‡∞∞‡∞§‡∞ø 12 ‡∞∞‡±ã‡∞ú‡±Å‡∞≤‡±ç‡∞≤‡±ã ‡∞Æ‡±ã‡∞∏‡±ç‡∞§‡∞∞‡±Å ‡∞®‡±Ä‡∞∞‡±Å ‡∞á‡∞µ‡±ç‡∞µ‡∞Ç‡∞°‡∞ø." },
          "Red Gram (Tur)": { sandy: "‡∞§‡∞ï‡±ç‡∞ï‡±Å‡∞µ ‡∞®‡±Ä‡∞ü‡∞ø‡∞µ‡±ç‡∞µ‡∞Ç‡∞°‡∞ø; ‡∞µ‡∞∞‡±ç‡∞∑‡∞Ç ‡∞Ü‡∞ß‡∞æ‡∞∞‡∞Ç‡∞ó‡∞æ.", clay: "‡∞™‡±Å‡∞µ‡±ç‡∞µ‡±Å‡∞≤‡±Å ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞™‡±Ü‡∞∞‡±Å‡∞ó‡±Å‡∞§‡±Å‡∞®‡±ç‡∞® ‡∞™‡∞™‡±ç‡∞™‡±Å ‡∞∏‡∞Æ‡∞Ø‡∞Ç‡∞≤‡±ã ‡∞Æ‡∞æ‡∞§‡±ç‡∞∞‡∞Æ‡±á.", loam: "‡∞∂‡∞æ‡∞ñ‡∞≤‡±Å ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞™‡±Å‡∞µ‡±ç‡∞µ‡±Å ‡∞∏‡∞Æ‡∞Ø‡∞Ç‡∞≤‡±ã ‡∞®‡±Ä‡∞ü‡∞ø‡∞µ‡±ç‡∞µ‡∞Ç‡∞°‡∞ø." },
          Rice: { sandy: "‡∞®‡∞ø‡∞∞‡∞Ç‡∞§‡∞∞‡∞Ç ‡∞®‡±Ä‡∞∞‡±Å ‡∞Ö‡∞µ‡∞∏‡∞∞‡∞Ç; ‡∞Æ‡∞Ç‡∞ü ‡∞Ö‡∞µ‡∞∏‡∞∞‡∞Ç.", clay: "2‚Äì3 ‡∞Ö‡∞Ç‡∞ó‡±Å‡∞≥‡∞æ‡∞≤ ‡∞®‡∞ø‡∞≤‡±ç‡∞µ ‡∞®‡±Ä‡∞∞‡±Å.", loam: "‡∞Æ‡∞ü‡±ç‡∞ü‡∞ø‡∞®‡∞ø ‡∞§‡±á‡∞Æ‡∞ó‡∞æ ‡∞â‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø, ‡∞™‡±ç‡∞∞‡∞§‡∞ø 7 ‡∞∞‡±ã‡∞ú‡±Å‡∞≤‡±ç‡∞≤‡±ã ‡∞®‡±Ä‡∞ü‡∞ø‡∞µ‡±ç‡∞µ‡∞Ç‡∞°‡∞ø." },
          Wheat: { sandy: "‡∞™‡±ç‡∞∞‡∞§‡∞ø 10‚Äì12 ‡∞∞‡±ã‡∞ú‡±Å‡∞≤‡±ç‡∞≤‡±ã ‡∞®‡±Ä‡∞ü‡∞ø‡∞µ‡±ç‡∞µ‡∞Ç‡∞°‡∞ø.", clay: "‡∞Æ‡±Ç‡∞≤‡∞æ‡∞≤‡±Å, ‡∞™‡±Å‡∞µ‡±ç‡∞µ‡±Å ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞ó‡∞ø‡∞Ç‡∞ú ‡∞™‡±Ç‡∞∞‡±ç‡∞µ‡∞ï ‡∞∏‡∞Æ‡∞Ø‡∞Ç‡∞≤‡±ã.", loam: "‡∞™‡±ç‡∞∞‡∞§‡∞ø 12‚Äì15 ‡∞∞‡±ã‡∞ú‡±Å‡∞≤‡±ç‡∞≤‡±ã." },
          Vegetables: { sandy: "‡∞µ‡±á‡∞∏‡∞µ‡∞ø‡∞≤‡±ã ‡∞∞‡±ã‡∞ú‡±Ç ‡∞®‡±Ä‡∞ü‡∞ø‡∞µ‡±ç‡∞µ‡∞Ç‡∞°‡∞ø.", clay: "‡∞∏‡∞™‡±ç‡∞§‡∞æ‡∞π‡∞æ‡∞®‡∞ø‡∞ï‡∞ø 2‚Äì3 ‡∞∏‡∞æ‡∞∞‡±ç‡∞≤‡±Å.", loam: "‡∞™‡±ç‡∞∞‡∞§‡∞ø 3‚Äì4 ‡∞∞‡±ã‡∞ú‡±Å‡∞≤‡±ç‡∞≤‡±ã." }
        }
      },
      pa: {
        recommend: "‡®∏‡®ø‡®´‡®æ‡®∞‡®∏‡®º‡©Ä ‡®´‡®∏‡®≤‡®æ‡®Ç ‡®Ö‡®§‡©á ‡®∏‡©Å‡®ù‡®æ‡®Ö",
        crops: {
          telangana: ["‡®ï‡®™‡®æ‡®π", "‡®Ö‡®∞‡®π‡®∞ (‡®§‡©Ç‡®∞)", "‡®ß‡®æ‡®®"],
          punjab: ["‡®ó‡©∞‡®π‡©Ç", "‡®ß‡®æ‡®®", "‡®Æ‡©±‡®ï‡©Ä"],
          bihar: ["‡®Æ‡©±‡®ï‡©Ä", "‡®ó‡©∞‡®®‡®æ", "‡®ß‡®æ‡®®"],
          delhi: ["‡®∏‡®¨‡®ú‡®º‡©Ä‡®Ü‡®Ç", "‡®ó‡©∞‡®π‡©Ç", "‡®∏‡®∞‡©ã‡®Ç"]
        },
        tips: {
          lowPh: "‡®Æ‡®ø‡©±‡®ü‡©Ä ‡®¶‡®æ pH ‡®µ‡®ß‡®æ‡®â‡®£ ‡®≤‡®à ‡®ö‡©Ç‡®®‡®æ ‡®™‡®æ‡®ì‡•§",
          highPh: "‡®ñ‡®æ‡®∞‡®æ‡®™‡®£ ‡®ò‡®ü‡®æ‡®â‡®£ ‡®≤‡®à ‡®ó‡©∞‡®ß‡®ï ‡®™‡®æ‡®ì‡•§",
          sandy: "‡®™‡®æ‡®£‡©Ä ‡®∞‡©ã‡®ï‡®£ ‡®≤‡®à ‡®ñ‡®æ‡®¶ ‡®Æ‡®ø‡®≤‡®æ‡®ì‡•§",
          clay: "‡®†‡©Ä‡®ï ‡®®‡®ø‡®ï‡®æ‡®∏ ‡®Ø‡®ï‡©Ä‡®®‡©Ä ‡®¨‡®£‡®æ‡®ì‡•§",
          loam: "‡®∏‡©∞‡®§‡©Å‡®≤‡®ø‡®§ ‡®Æ‡®ø‡©±‡®ü‡©Ä ‚Äî ‡®ú‡©à‡®µ‡®ø‡®ï ‡®™‡®¶‡®æ‡®∞‡®• ‡®∞‡©±‡®ñ‡©ã‡•§",
          budget: "‡®ñ‡®∞‡®ö ‡®¨‡®ö‡®æ‡®â‡®£ ‡®≤‡®à ‡®ú‡©à‡®µ‡®ø‡®ï ‡®ñ‡®æ‡®¶ ‡®Ö‡®§‡©á ‡®∏‡®•‡®æ‡®®‡®ï ‡®¨‡©Ä‡®ú ‡®µ‡®∞‡®§‡©ã‡•§",
          weather: "‡®¨‡©Ä‡®ú ‡®¨‡©ã‡®£ ‡®§‡©ã‡®Ç ‡®™‡®π‡®ø‡®≤‡®æ‡®Ç ‡®∏‡®•‡®æ‡®®‡®ï ‡®Æ‡©Ä‡®Ç‡®π ‡®¶‡®æ ‡®Ö‡®®‡©Å‡®Æ‡®æ‡®® ‡®¶‡©á‡®ñ‡©ã‡•§"
        },
        disease: ["‡®™‡©±‡®§‡®ø‡®Ü‡®Ç '‡®§‡©á ‡®¶‡®æ‡®ó‡®º", "‡®™‡©ã‡®∏‡®º‡®ï ‡®§‡©±‡®§‡®æ‡®Ç ‡®¶‡©Ä ‡®ò‡®æ‡®ü", "‡®´‡®∏‡®≤ ‡®∏‡®ø‡®π‡®§‡®Æ‡©∞‡®¶ ‡®π‡©à"],
        irrigation: {
          Cotton: { sandy: "‡®π‡®∞ 7‚Äì10 ‡®¶‡®ø‡®® ‡®∏‡®ø‡©∞‡®ö‡®æ‡®à ‡®ï‡®∞‡©ã (‡®π‡®≤‡®ï‡®æ, ‡®µ‡®æ‡®∞‡©∞‡®µ‡®æ‡®∞).", clay: "‡®π‡®∞ 15 ‡®¶‡®ø‡®® ‡®∏‡®ø‡©∞‡®ö‡®æ‡®à ‡®ï‡®∞‡©ã, ‡®™‡®æ‡®£‡©Ä ‡®ñ‡©ú‡®æ ‡®®‡®æ ‡®π‡©ã‡®µ‡©á.", loam: "‡®π‡®∞ 12 ‡®¶‡®ø‡®® ‡®Æ‡©ã‡®°‡®∞‡©á‡®ü ‡®™‡®æ‡®£‡©Ä ‡®¶‡®ø‡®ì." },
          "Red Gram (Tur)": { sandy: "‡®ò‡©±‡®ü ‡®∏‡®ø‡©∞‡®ö‡®æ‡®à; ‡®Æ‡©Ä‡®Ç‡®π ‡®â‡©±‡®§‡©á ‡®®‡®ø‡®∞‡®≠‡®∞.", clay: "‡®´‡©Å‡©±‡®≤‡®£ ‡®Ö‡®§‡©á ‡®´‡®≤‡©Ä ‡®≠‡®∞‡®® '‡®§‡©á ‡®∏‡®ø‡©∞‡®ö‡®æ‡®à.", loam: "‡®∏‡®º‡®æ‡®ñ‡®æ ‡®Ö‡®§‡©á ‡®´‡©Å‡©±‡®≤‡®£ '‡®§‡©á ‡®∏‡®ø‡©∞‡®ö‡®æ‡®à." },
          Rice: { sandy: "‡®≤‡®ó‡®æ‡®§‡®æ‡®∞ ‡®™‡®æ‡®£‡©Ä ‡®¶‡©Ä ‡®≤‡©ã‡©ú; ‡®™‡©±‡®°‡®≤‡®ø‡©∞‡®ó ‡®¶‡©Ä ‡®∏‡®ø‡®´‡®æ‡®∞‡®∏‡®º.", clay: "2‚Äì3 ‡®á‡©∞‡®ö ‡®™‡®æ‡®£‡©Ä ‡®¨‡®£‡®æ‡®è ‡®∞‡©±‡®ñ‡©ã.", loam: "‡®Æ‡®ø‡©±‡®ü‡©Ä ‡®®‡©Ç‡©∞ ‡®®‡®Æ‡©Ä ‡®∞‡©±‡®ñ‡©ã, ‡®π‡®∞ 7 ‡®¶‡®ø‡®® ‡®∏‡®ø‡©∞‡®ö‡®æ‡®à ‡®ï‡®∞‡©ã." },
          Wheat: { sandy: "‡®π‡®∞ 10‚Äì12 ‡®¶‡®ø‡®® ‡®∏‡®ø‡©∞‡®ö‡®æ‡®à.", clay: "‡®ú‡©ú, ‡®´‡©Å‡©±‡®≤ ‡®Ö‡®§‡©á ‡®Ö‡®®‡®æ‡®ú ‡®≠‡®∞‡®® '‡®§‡©á.", loam: "‡®π‡®∞ 12‚Äì15 ‡®¶‡®ø‡®®." },
          Vegetables: { sandy: "‡®ó‡®∞‡®Æ‡©Ä ‡®µ‡®ø‡©±‡®ö ‡®π‡®∞ ‡®∞‡©ã‡®ú‡®º ‡®∏‡®ø‡©∞‡®ö‡®æ‡®à.", clay: "‡®π‡®´‡®§‡©á ‡®µ‡®ø‡©±‡®ö 2‚Äì3 ‡®µ‡®æ‡®∞‡©Ä.", loam: "‡®π‡®∞ 3‚Äì4 ‡®¶‡®ø‡®® ‡®∏‡®ø‡©∞‡®ö‡®æ‡®à." }
        }
      }
    };

    let currentAdvice = "";

    function getAdvice(phInput, soilInput, diseaseDetected) {
      const loc = document.getElementById("location").value;
      const lang = document.getElementById("language").value;
      const ph = phInput || parseFloat(document.getElementById("soilPh").value);
      const soil = soilInput || document.getElementById("soilType").value;
      const t = translations[lang] || translations["en"];

      const cropList = t.crops[loc];
      let tipsArr = [];

      if (ph < 5.5) tipsArr.push(t.tips.lowPh);
      if (ph > 7.5) tipsArr.push(t.tips.highPh);
      if (t.tips[soil]) tipsArr.push(t.tips[soil]);

      tipsArr.push(t.tips.budget);
      tipsArr.push(t.tips.weather);

      let disease = diseaseDetected || t.disease[Math.floor(Math.random() * t.disease.length)];
      tipsArr.push("üåø " + disease);

      let irrigationAdvice = "";
      cropList.forEach(crop => {
        if (t.irrigation[crop] && t.irrigation[crop][soil]) {
          irrigationAdvice += üíß ${crop}: ${t.irrigation[crop][soil]}\n;
        }
      });

      const msg =
        ${t.recommend}:\n\nüìç ${loc.toUpperCase()}\n +
        üåæ ${cropList.join(", ")}\n\n +
        üß™ Soil pH: ${ph.toFixed(2)}, Type: ${soil}\n\n +
        ‚û§ ${tipsArr.join("\n‚û§ ")}\n\n +
        üíß Irrigation Advice:\n${irrigationAdvice};

      document.getElementById("adviceBox").innerText = msg;
      currentAdvice = msg;
    }

    const video = document.getElementById("video");
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");

    navigator.mediaDevices.getUserMedia({ video: true })
      .then(stream => { video.srcObject = stream; })
      .catch(err => console.error("Camera error:", err));

    function captureImage() {
      ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
      let ph = (Math.random() * (8 - 5) + 5);
      let soilTypes = ["loam", "clay", "sandy"];
      let soil = soilTypes[Math.floor(Math.random() * soilTypes.length)];
      getAdvice(ph, soil);
    }

    function startListening() {
      const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
      recognition.lang = "en-IN";
      recognition.start();
      recognition.onresult = (event) => {
        const command = event.results[0][0].transcript.toLowerCase();
        if (command.includes("advice")) {
          getAdvice();
        } else {
          document.getElementById("adviceBox").innerText = "üé§ You said: " + command;
        }
      };
    }

    function speakAdvice() {
      if (!currentAdvice) return;
      const lang = document.getElementById("language").value;
      const utterance = new SpeechSynthesisUtterance(currentAdvice);
      const langMap = { en: "en-US", hi: "hi-IN", te: "te-IN", pa: "pa-IN" };
      const voices = window.speechSynthesis.getVoices();
      const selectedVoice = voices.find(v => v.lang === langMap[lang]);
      if (selectedVoice) utterance.voice = selectedVoice;
      speechSynthesis.speak(utterance);
    }

    window.speechSynthesis.onvoiceschanged = () => { window.speechSynthesis.getVoices(); };
  </script>
</body>
</html>